<launch>

<param name="/use_sim_time" value="true"/>
<node pkg="tf" type="static_transform_publisher" name="map_to_camera_init" 
args="0.00 0.0 0.0 1.57 0.0 1.57 /map /camera_init 100" />
<!--<node pkg="tf" type="static_transform_publisher" name="velodyne_below_to_aft_mapped" -->
  <!--args="0.00 0.0 0.0 0.0 0.0 0.0 /velodyne_below /aft_mapped 100" />-->
<node if="0" pkg="tf" type="static_transform_publisher" name="map_to_map_link" 
  args="0.00 0.0 0.0 -1.57 0.0 0.0 /map /map_link 100" />
<node if="0" name="map_server" pkg="map_server" type="map_server" args="$(find velo_scanmatch)/loamtest3rd.yaml">
  <param name="frame_id" value="map_link"/>
</node>
<!--<arg name="bagfile" default="/media/mint/362C32F52C32B02B/drv3/iseraredimu_2017-08-31-16-25-41_0.bag"/>-->
<!--<arg name="bagfile" default="/home/agoy/Documents/stk_calib/tsf_stk_calib_2018-02-07-16-06-21_0.bag"/>-->
<arg name="bagfile" default="/home/agoy/Documents/denso_calib_2/denso_calib_2018-02-07-11-22-21_0.bag /home/agoy/Documents/denso_calib_2/denso_calib_2018-02-07-11-22-57_1.bag /home/agoy/Documents/denso_calib_2/denso_calib_2018-02-07-11-23-34_2.bag"/>
  <arg name="rviz" default="true" />

  <node pkg="velo_scanmatch" type="scanRegistration" name="scanRegistration" output="screen">
  <remap from="velodyne_points" to="/velodyne_top/velodyne_points"/>
  <!--<remap from="/imu/data" to="an_device/Imu"/>-->
  <!--<remap from="/imu/data" to="/mti/sensor/imu"/>-->
  </node>

 <node pkg="velo_scanmatch" type="laserOdometry" name="laserOdometry" output="screen" respawn="true">
  </node>

  <node pkg="velo_scanmatch" type="laserMapping" name="laserMapping" output="screen">
    <remap from="/imu/data" to="an_device/Imu"/>
  </node>
  <node pkg="velo_scanmatch" type="transformMaintenance" name="transformMaintenance" output="screen"/>
  <group if="$(arg rviz)">
    <!--<node launch-prefix="nice" pkg="rviz" type="rviz" name="rviz" args="-d $(find velo_scanmatch)/rviz_cfg/loam_velodyne_rev.rviz" />-->
    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find velo_scanmatch)/rviz_cfg/loam_velodyne_rev_ed.rviz" required="true"/>
  </group>
  <!--<node if="1" name="spatialconverter" pkg="velo_scanmatch" type="spatial_imu_to_euler.py" output="log"/>-->
   <node if="1" name="rplay_$(anon rplay)" pkg="rosbag" type="play" args="--clock -r 0.5 -d 2 $(arg bagfile)" output="log"/>

</launch>
